<div class="add-employee">
  <div class="its-card">
    <h3 class="card-header ps-3">Add Employee</h3>
    <!-- <div class="row pt-3"> -->
      
    <div class="row settings-comp">
      <div class="accordion card-body" id="accordionExample" *ngIf="isAdmin">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button class="accordion-button collapsed" type="button" id="addEmployeeAccordian" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
              <strong>Add Employee</strong>
            </button>
          </h2>
          <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
            <div class="accordion-body">
              <div class="form-input-sticky">
                <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()">
                  <div class="row add-employee">
                    <!-- Name -->
                    <div class="col-3"> 
                      <label for="empName">Name</label>
                      <input type="text" id="empName" formControlName="empName" class="form-control" required>
                      <div
                        *ngIf="employeeForm.controls.empName.invalid && (employeeForm.controls.empName.dirty || employeeForm.controls.empName.touched)"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.empName.errors.required">
                          Employee Name is required.
                        </div>
                        <div *ngIf="employeeForm.controls.empName.errors.minlength">
                          Employee Name must be at least 3 characters long.
                        </div>
                      </div>
                    </div>        
                    <!-- Mobile -->
                    <div class="col-3">
                      <label for="contactNo">Mobile Number</label>
                      <input type="text" id="contactNo" formControlName="contactNo" class="form-control" maxlength="10">
                      <div *ngIf="employeeForm.controls.contactNo.invalid && employeeForm.controls.contactNo.touched"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.contactNo.errors.required">Employee Mobile is required.</div>
                        <div *ngIf="employeeForm.controls.contactNo.errors.pattern">
                          Mobile Number must be 10 digits long (Only numbers).
                        </div>
                      </div>
                    </div>  
                    <!-- DOB -->
                    <div class="col-3">
                      <label for="empDOB">Employee date of birth</label>
                      <input type="date" id="empDOB" class="form-control" formControlName="empDOB" required>
                      <div
                        *ngIf="employeeForm.controls.empDOB.invalid && (employeeForm.controls.empDOB.dirty || employeeForm.controls.empDOB.touched)">
                        <div *ngIf="employeeForm.controls.empDOB.errors.required" class="invalid-red">
                          Employee date of birth is required.
                        </div>
                      </div>
                    </div>    
                    <!-- Joining date -->
                    <div class="col-3">
                      <label for="joiningDate">Employee joining date</label>
                      <input type="date" id="joiningDate" class="form-control" formControlName="joiningDate" required>
                      <div
                        *ngIf="employeeForm.controls.joiningDate.invalid && (employeeForm.controls.joiningDate.dirty || employeeForm.controls.joiningDate.touched)">
                        <div *ngIf="employeeForm.controls.joiningDate.errors.required" class="invalid-red">
                          Employee joining date is required.
                        </div>
                      </div>
                    </div>   
                    <!-- Gender   -->
                    <div class="col-3">
                      <label for="gender">Gender</label>
                      <select id="gender" formControlName="gender" class="form-control" required>
                        <option value="">Select</option>            
                        <option *ngFor="let option of genderValue" [value]="option">{{ option }}</option>
                      </select>
                      <div
                        *ngIf="employeeForm.controls.gender.invalid && (employeeForm.controls.gender.dirty || employeeForm.controls.gender.touched)"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.gender.errors.required">
                          Gender is required.
                        </div>
                      </div>
                    </div>   
                    <!-- Designation      -->
                    <div class="col-3">
                      <label for="designation">Designation</label>
                      <select id="designation" formControlName="designation" class="form-control" required>
                        <option value="">Select</option>            
                        <option *ngFor="let option of designationValue" [value]="option">{{ option }}</option>
                      </select>
                      <div
                        *ngIf="employeeForm.controls.designation.invalid && (employeeForm.controls.designation.dirty || employeeForm.controls.designation.touched)"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.designation.errors.required">
                          Designation is required.
                        </div>
                      </div>
                    </div>   
                    <!-- Status   -->
                    <div class="col-3">
                      <label for="status">Status</label>
                      <select id="status" formControlName="status" class="form-control" required>
                        <option value="">Select</option>            
                        <option *ngFor="let option of statusValue" [value]="option">{{ option }}</option>
                      </select>
                      <div
                        *ngIf="employeeForm.controls.status.invalid && (employeeForm.controls.status.dirty || employeeForm.controls.status.touched)"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.status.errors.required">
                          Status is required.
                        </div>
                      </div>
                    </div>
                    <!-- Adhaar -->
                    <div class="col-3">
                      <label for="identificationNo">Adhaar Number</label>
                      <input type="text" id="identificationNo" class="form-control" formControlName="identificationNo" maxlength="12">
                      <div *ngIf="employeeForm.controls.identificationNo.invalid && employeeForm.controls.identificationNo.touched"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.identificationNo.errors.required">Employee Adhaar is required.</div>
                        <div *ngIf="employeeForm.controls.identificationNo.errors.pattern">
                          Adhaar Number must be 12 digits long (Only numbers).
                        </div>
                      </div>
                    </div>   
                    <!-- Email -->
                    <div class="col-3">
                      <label for="email">Email</label>
                      <input type="email" id="email" formControlName="email" class="form-control"/>
                      <div
                        *ngIf="employeeForm.controls.email.invalid && (employeeForm.controls.email.dirty || employeeForm.controls.email.touched)"
                        class="invalid-red">
                        Invalid email address.
                        <!-- <div *ngIf="employeeForm.controls.email.errors.required">
                        </div> -->
                      </div>
                    </div>   
                    <!-- Address -->
                    <div class="col-3">
                      <label for="address">Address</label>
                      <!-- <input type="text-area" id="address" formControlName="address"> -->
                      <textarea id="address" rows="1" formControlName="address" class="form-control"></textarea>
                      <div *ngIf="employeeForm.controls.address.invalid && employeeForm.controls.address.touched"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.address.errors.required">Employee Address is required.</div>
                      </div>
                    </div>    
                    <!-- Description      -->
                    <div class="col-3">
                      <label for="description">Description</label>
                      <textarea id="description" rows="1" formControlName="description" class="form-control"></textarea>
                      <div *ngIf="employeeForm.controls.description.invalid && employeeForm.controls.description.touched"
                        class="invalid-red">
                        <div *ngIf="employeeForm.controls.description.errors.required">Description is required.</div>
                      </div>
                    </div>     
            
                  </div>
                  <div class="row">
                    <div class="col-12 text-end">
                      <button type="submit" mat-flat-button color="primary" [disabled]="employeeForm.invalid">
                        {{ editedMaterialIndex !== null ? 'Update Employee' : 'Add Employee' }}  
                      </button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      
  
    <div class="flex-center">
      <mat-spinner *ngIf="showSpinner" diameter=125></mat-spinner>
    </div> 
    
    <div *ngIf=!showSpinner>
      <div class="cloths mt-10">
        <dx-data-grid id="gridContainer"
                [dataSource]="employeeData"
                [showBorders]="true"
                [rowAlternationEnabled]="true"
                [allowColumnResizing]="true"
                [allowColumnReordering]="true"
              >
          <dxo-scrolling mode="virtual"></dxo-scrolling>
          <dxo-filter-row [visible]="true"></dxo-filter-row>
          <dxo-header-filter [visible]="true"></dxo-header-filter>
          <dxo-column-chooser [enabled]="true" mode="select" [allowSearch]="true"></dxo-column-chooser>

          <dxo-group-panel [visible]="true"></dxo-group-panel>
          <dxo-grouping [autoExpandAll]="true"></dxo-grouping> 
  
          <dxi-column dataField="empName" caption="Name"></dxi-column>
          <dxi-column dataField="empId" caption="Emp Id"></dxi-column>
          <dxi-column dataField="designation" caption="Designation"></dxi-column>
          <dxi-column dataField="contactNo" caption="Mobile"></dxi-column>
          <dxi-column dataField="gender" caption="Gender"></dxi-column>
          <dxi-column dataField="empDOB" caption="DOB"></dxi-column>
          <dxi-column dataField="status" caption="Status"></dxi-column>
          <dxi-column dataField="identificationNo" caption="Adhaar No"></dxi-column>
          <dxi-column dataField="joiningDate" caption="Joining Date"></dxi-column>
          <dxi-column dataField="email" caption="Email"[visible]="false"></dxi-column>
          <dxi-column dataField="address" caption="Address"[visible]="false"></dxi-column>
          <dxi-column dataField="description" caption="Description"[visible]="false"></dxi-column>
          
          <dxi-column caption="Edit/Role" cellTemplate="cellTemplateHyperlink" alignment="center" *ngIf="isAdmin"></dxi-column>  
          <div *dxTemplate="let data of 'cellTemplateHyperlink'; let i = index"> 
            <button mat-icon-button (click)="edit(data.data,i)" class="btn btn-sm me-2 btn-primary">
              <mat-icon class="me-2">edit</mat-icon>
            </button>
            <!-- <button class="btn btn-warning btn-xs" data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="getSelectedData('')">Add Material</button>     -->

            <button mat-icon-button  data-bs-toggle="modal" data-bs-target="#exampleModal" (click)="roleSelection(data.data,i)" class="btn btn-sm me-2 btn-primary">
              <mat-icon class="icon-mat">remove_red_eye</mat-icon>                         
            </button>
          </div>
  
          <dxo-search-panel [visible]="true"></dxo-search-panel>
          <dxo-paging [pageSize]="10"> </dxo-paging>              
        </dx-data-grid>       
      </div>

    </div>

        <!-- <table class="table" *ngIf=!showSpinner>
          <thead>
            <tr>
              <th class="text-center">Name</th>
              <th class="text-center">Mobile</th>
              <th class="text-center">DOB</th>
              <th class="text-center">Joining Date</th>
              <th class="text-center">Gender</th>
              <th class="text-center">Designation</th>
              <th class="text-center">Status</th>
              <th class="text-center">Adhaar No.</th>
              <th class="text-center">Email</th>
              <th class="text-center">Address</th>
              <th class="text-center">Description</th>
              <th class="text-center">Action</th>
            </tr>
          </thead>
  
          <tbody>
            <tr *ngFor="let data of employeeData; let i = index">
              <td class="text-center">{{ data.empName }}</td>
              <td class="text-center">{{ data.contactNo }}</td>
              <td class="text-center">{{ data.empDOB }}</td>
              <td class="text-center">{{ data.joiningDate }}</td>
              <td class="text-center">{{ data.gender }}</td>
              <td class="text-center">{{ data.designation }}</td>
              <td class="text-center">{{ data.status }}</td>
              <td class="text-center">{{ data.identificationNo }}</td>
              <td class="text-center">{{ data.email }}</td>
              <td class="text-center">{{ data.address }}</td>
              <td class="text-center">{{ data.description }}</td>
              
              <td>
                <button (click)="edit(data,i)" class="btn btn-sm me-2 btn-primary">Edit</button>
              </td>
            </tr>
          </tbody>
        </table> -->
    </div>
  </div>
</div>

  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <!-- <app-adda-add-material [forEditAddaMaterial]="editAddaMaterialData" (forDetailAddReloadMaterial)="dataFromAddaMaterial($event)"></app-adda-add-material> -->
        <app-add-employee-roles [employeeDataForRole]="employeeDataForRole" [timeInMiliSeconds]="timeInMiliSeconds" (forDetailAddReloadMaterial)="dataFromAddaMaterial($event)"></app-add-employee-roles>
      <!-- <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          ...
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary">Save changes</button>
        </div>
      </div> -->
    </div>
  </div>

